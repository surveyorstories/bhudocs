---
sidebar_position: 4
---

# LPM Processing

**Shortcut to Launch**: **<u>SHIFT + ALT + L</u>**

:::warning  
This documentation is primarily generated by AI and may contain inaccuracies or incomplete information. A thorough manual review is still pending. Please [Report](../../feedback) any errors, inconsistencies, or suggestions for improvement to ensure accuracy and reliability.
:::

## Introduction

The LPM Processing Model is designed to assist with the generation of Land Parcel Maps (LPM) for villages. Developed for the AP Resurvey 2020 Project, this model ensures accurate and efficient processing of geospatial data and the generation of standardized layouts for mapping purposes. The model is built to handle shapefiles, process spatial indices, create buffers, and apply styles while generating final outputs such as vertices, frill lines, and layouts.

## Pre-Requisite Steps

Before running the algorithm, ensure that:

1. **Project Saving**:

   - Ensure that the project is saved. The algorithm depends on saved project settings for output management.

2. **Layer Setup**:

   - Make sure the **village boundary layer** and **government land layer** are available in the project.

3. **Projection Consistency**:

   - Ensure that the project and layers are in the same **Projection (CRS)** to avoid issues during processing.

## Data Requirements

| **Parameter**                                | **Description**                                                                                                                   | **Expected Input**            |
| -------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | ----------------------------- |
| **Village Final Shape File**                 | Shapefile of the village with no topology errors and containing LP NO, ACRES, and HECTARES columns.                               | `.shp` file                   |
| **Generate LPMs for Selected Features Only** | Choose whether to generate LPMs only for selected features. If selected, the algorithm will process only the land parcels chosen. | Checkbox Boolean (True/False) |
| **Acres Column**                             | Attribute field name for acreage values in the shapefile.                                                                         | Field name                    |
| **Hectares Column**                          | Attribute field name for hectare values in the shapefile.                                                                         | Field name                    |
| **Create Side Villages Polygon Layer**       | Choose whether to create a side villages polygon layer. This layer helps visualize and manage side village information.           | Checkbox Boolean (True/False) |
| **Frill Line Length**                        | Desired frill line length (default is 3 units).                                                                                   | Numeric value                 |
| **RLR/ROR File**                             | Form-38 Resurvey Land Register or Record of Rights Excel file.                                                                    | `.xlsx` file                  |
| **ULPIN Layer**                              | Unedited ULPIN file for the village.                                                                                              | `.csv` ULPIN file             |
| **LP Number Column**                         | Column name for LP numbers in the ULPIN layer.                                                                                    | Field name                    |
| **ULPIN Column**                             | Column name for ULPIN values in the ULPIN layer.                                                                                  | Field name                    |
| **Village Code**                             | Seven-digit code of the village.                                                                                                  | Numeric value                 |
| **Village Name**                             | Name of the village in Telugu.                                                                                                    | Text                          |
| **Mandal Name**                              | Name of the Mandal in Telugu.                                                                                                     | Text                          |
| **District Name**                            | Name of the district in Telugu.                                                                                                   | Text                          |
| **Village Surveyor Name**                    | Name of the village surveyor in Telugu.                                                                                           | Text                          |

## Workflow Summary

The model follows these primary steps:

1. **Input Preparation:** Load the required shapefiles and configure parameters.

2. **Spatial Processing:** Create spatial indices, buffers, and refactored geometries.

3. **Style and Layer Setup:** Apply styles and load layers into the QGIS project.

4. **Output Generation:** Generate and customize layouts for A3 and A4 templates.

## Step-by-Step Guide

### 1. Create Topo Layers

- **Before running the algorithm**, use the **Create Topo Layers** tool from the toolset. This tool generates the following layers:
  
  - **TopoPoint**: Point layer for topographic features.
  - **TopoLine**: Line layer for topographic features.
  - **TopoPolygon**: Polygon layer for topographic features.
  - These layers are necessary for proper visualization and representation of topographic data in the generated map. for detailed instructions visit [How to create Topo Layers](./tool_set#1-topo-layers)

### ### 2. Input Parameters

- **Village Final Shape File:** Select the shapefile of the village with no topology errors and containing the following columns:
  
  - LP Number (LP NO)
  
  - Area in Acres
  
  - Area in Hectares

- **Area Columns:**
  
  - *Acres Column:* Choose the attribute field for acreage.
  
  - *Hectares Column:* Choose the attribute field for hectare values.

- **Frill Line Length:** Enter the desired frill line length (default is 3 units).

- **RLR/ROR Selection:** Provide the Form-38 Resurvey Land Register or Record of Rights Excel file.

- **ULPIN Layer:** Select the unedited ULPIN file for the village.

- **Village and Mandal Information:** Enter the following details:
  
  - LP Number Column (from ULPIN Layer)
  
  - ULPIN Column (from ULPIN Layer)
  
  - 7-digit Village Code
  
  - Village Name (in Telugu)
  
  - Mandal Name (in Telugu)
  
  - District Name (in Telugu)
  
  - Village Surveyor Name (in Telugu)

- **Generate LPMs for Selected Features Only:** Toggle this option to choose whether to generate Land Parcel Maps only for selected land parcels or for all parcels.

- **Create Side Villages Polygon Layer:** Toggle this option to create the side villages polygon layer, which will be used to represent side villages in the generated maps.

### 3. Layer Management and Styling

- Loads layers into the QGIS project with custom names for easier identification.

- Applies the predefined styles to the following layers:
  
  - Final Vertices
  
  - Frill Lines
  
  - Exploded Lines

:::info  
All layers and files generated by the Panel are saved in the **Project Directory**.  
:::

### 4. Layout Generation

#### A3 and A4 Templates

- Adds pre-designed templates to the project:
  
  - **A3 Template:** `MCC_A3_LPM_TEMPLATE_GAUTHAMI.qpt`
  
  - **A4 Template:** `MCC_A4_LPM_TEMPLATE_GAUTHAMI.qpt`

- Customize the A4 layout (if needed):
  
  - Modify title block size and positioning.
  
  - Link to the `Final_Vertices` layer for final visualization.

### 5. Outputs

- **Processed Layers:**
  
  - Final Vertices (`Final_Vertices.shp`)
  
  - Frill Lines (`Frill_Lines.shp`)
  
  - Exploded Lines (`Exploded_Lines.shp`)
  
  - Side_Villages (`Side_Villages.shp`)( if it was selected)
  
  - Selected_LPs (`Selected_LPs.shp`), Side_LPs (`Side_Lps.shp`) ( in case of generated for selected features selected)

- **Generated Layouts:**
  
  - A3 Layout
  
  - A4 Layout

- **Log File:**
  
  - Saved log file (`lpm_proceesing_log.html`) for tracking processing steps.

## Post-Processing Steps

After running the algorithm, you can perform the following post-processing steps:

1. **Review Map Accuracy**:

   - Check the generated map to ensure that LPM boundaries and land parcels are correctly represented made necessary adjustments if needed as per the project requirements.

2. **Side Village Customization**:

   - Easily add side village names and frill lines using pre-generated layers.

3. **Modify Survey Details**:

   - If there are any discrepancies in the  details, adjust the relevant fields in master panel or re-run the algorithm if necessary with appropriate data.

4. **Final Template Adjustments**:

   - Make any required adjustments to the **A3** and **A4** templates based on project requirements.

5. **Verify Output Layers**:

   - Ensure all generated layers (e.g., Final Vertices ,Frill Lines,Exploded Lines and topo layers) are correctly aligned and properly labeled.

## Error Handling and Warnings

- The model checks for cancellations at critical steps. Users can cancel processing if needed.

- Warnings are displayed for steps that take longer time or require attention.

## Technical Details

- **Spatial Indexing:** Improves performance during geometry operations.

- **Attribute Indexing:** Ensures faster querying and attribute management.

- **Geometry Refinement:** Fixes topology issues and ensures data consistency.

## Points to Remember

- **Save Your Project**:
  
  - The algorithm cannot run without a saved project, as it depends on the project directory.

- **Verify Data**:
  
  - Ensure all required shapefiles and fields are mapped and entered correctly.

- **Projection Consistency**:
  
  - Verify that the project and shapefiles share the same projection system.

- **Preserve Layer Names**:
  
  - Changing the names of layers generated by the algorithm will disrupt functionality.

## FAQs

1. **What shapefile formats are supported?**

   - The model supports standard `.shp`, `.gpkg` files with correct attribute fields.

2. **Can I modify the templates?**

   - Yes, you can customize the provided QPT templates as needed.

3. **What happens if an input file is missing?**

   - The model will stop and display an error. Ensure all required inputs are correctly selected.

## Conclusion

The LPM Processing Model streamlines the creation of Land Parcel Maps, making it an essential tool for land survey projects. With its comprehensive input handling, robust spatial processing, and elegant layout generation, this tool enhances efficiency and accuracy for geospatial professionals.
